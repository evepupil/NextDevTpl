# ============================================
# NextDevTpl 环境变量配置
# ============================================
# 复制此文件为 .env.local 并填写实际值
# cp .env.example .env.local

# ============================================
# 应用配置
# ============================================
# 应用 URL (用于 OAuth 回调和 API 请求)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ============================================
# 数据库配置 (PostgreSQL)
# ============================================
# 本地 Docker PostgreSQL 示例:
# DATABASE_URL=postgresql://postgres:password@localhost:5432/nextdevtpl

# Neon Serverless PostgreSQL 示例 (注意: 使用非 pooler 端点以支持事务):
# DATABASE_URL=postgresql://user:password@ep-xxx.us-east-1.aws.neon.tech/neondb?sslmode=require

DATABASE_URL=postgresql://postgres:password@localhost:5432/nextdevtpl

# ============================================
# Better Auth 配置
# ============================================
# 认证密钥 (用于签名会话 Cookie)
# 生成方法: openssl rand -base64 32
BETTER_AUTH_SECRET=your-super-secret-key-change-in-production

# 认证 URL (通常与 NEXT_PUBLIC_APP_URL 相同)
BETTER_AUTH_URL=http://localhost:3000

# ============================================
# GitHub OAuth 配置
# ============================================
# 1. 访问 https://github.com/settings/developers
# 2. 点击 "New OAuth App"
# 3. 填写:
#    - Application name: NextDevTpl (或你的应用名)
#    - Homepage URL: http://localhost:3000
#    - Authorization callback URL: http://localhost:3000/api/auth/callback/github
# 4. 获取 Client ID 和 Client Secret

GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# ============================================
# Google OAuth 配置
# ============================================
# 1. 访问 https://console.cloud.google.com/apis/credentials
# 2. 创建项目 (如果还没有)
# 3. 点击 "Create Credentials" -> "OAuth client ID"
# 4. 选择 "Web application"
# 5. 添加:
#    - Authorized JavaScript origins: http://localhost:3000
#    - Authorized redirect URIs: http://localhost:3000/api/auth/callback/google
# 6. 获取 Client ID 和 Client Secret

GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# ============================================
# Stripe 支付配置
# ============================================
# 1. 访问 https://dashboard.stripe.com/apikeys
# 2. 获取 Secret Key (以 sk_test_ 或 sk_live_ 开头)

STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key

# Webhook 密钥
# 1. 访问 https://dashboard.stripe.com/webhooks
# 2. 添加端点: https://your-domain.com/api/webhooks/stripe
# 3. 选择事件: checkout.session.completed, customer.subscription.updated 等
# 4. 获取 Signing Secret (以 whsec_ 开头)

STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret

# Stripe 价格 ID (在 Stripe Dashboard -> Products 中创建)
# 可选: 如果不配置，对应的计划将不可用
NEXT_PUBLIC_STRIPE_PRICE_PRO_MONTHLY=price_xxx
NEXT_PUBLIC_STRIPE_PRICE_PRO_YEARLY=price_xxx
NEXT_PUBLIC_STRIPE_PRICE_LIFETIME=price_xxx
NEXT_PUBLIC_STRIPE_PRICE_ENTERPRISE_MONTHLY=price_xxx
NEXT_PUBLIC_STRIPE_PRICE_ENTERPRISE_YEARLY=price_xxx

# ============================================
# 支付提供商 (Stripe / Creem)
# ============================================
# 可选值: stripe | creem
NEXT_PUBLIC_PAYMENT_PROVIDER=stripe

# ============================================
# Creem 支付配置
# ============================================
# 1. 访问 https://creem.io
# 2. 创建产品并获取 Product ID
# 3. 获取 API Key 和 Webhook Secret
# 4. Webhook 端点: https://your-domain.com/api/webhooks/creem

CREEM_API_KEY=creem_api_key
CREEM_WEBHOOK_SECRET=creem_webhook_secret

# 测试环境开关 (非生产默认使用 test-api)
CREEM_TEST_MODE=true
# 可选: 自定义 API Base
# CREEM_API_BASE_URL=https://test-api.creem.io

# Creem 产品 ID (用于订阅/一次性购买)
NEXT_PUBLIC_CREEM_PRODUCT_PRO_MONTHLY=prod_xxx
NEXT_PUBLIC_CREEM_PRODUCT_PRO_YEARLY=prod_xxx
NEXT_PUBLIC_CREEM_PRODUCT_LIFETIME=prod_xxx
NEXT_PUBLIC_CREEM_PRODUCT_ENTERPRISE_MONTHLY=prod_xxx
NEXT_PUBLIC_CREEM_PRODUCT_ENTERPRISE_YEARLY=prod_xxx

# Creem 积分套餐产品 ID
CREEM_PRODUCT_CREDITS_LITE=prod_xxx
CREEM_PRODUCT_CREDITS_STANDARD=prod_xxx
CREEM_PRODUCT_CREDITS_PRO=prod_xxx

# ============================================
# 邮件服务配置 (Resend)
# ============================================
# 1. 访问 https://resend.com
# 2. 创建 API Key
# 3. 配置发件域名 (用于生产环境)

RESEND_API_KEY=re_your-resend-api-key

# 发件人地址 (格式: "Name <email@domain.com>")
EMAIL_FROM="NextDevTpl <noreply@your-domain.com>"

# ============================================
# 存储配置 (S3 兼容: AWS S3 / Cloudflare R2 / MinIO)
# ============================================
# Cloudflare R2 示例:
# STORAGE_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
# STORAGE_REGION=auto

# AWS S3 示例:
# STORAGE_ENDPOINT=https://s3.us-east-1.amazonaws.com
# STORAGE_REGION=us-east-1

STORAGE_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
STORAGE_REGION=auto
STORAGE_ACCESS_KEY_ID=your-access-key-id
STORAGE_SECRET_ACCESS_KEY=your-secret-access-key

# 头像存储桶名称 (需要预先在存储服务中创建)
NEXT_PUBLIC_AVATARS_BUCKET_NAME=avatars

# ============================================
# AI 配置 (OpenAI)
# ============================================
# 1. 访问 https://platform.openai.com/api-keys
# 2. 创建 API Key

OPENAI_API_KEY=sk-your-openai-api-key

# ============================================
# 可选配置
# ============================================

# 定时任务密钥 (用于保护 cron 端点)
# 生成方法: openssl rand -hex 32
# CRON_SECRET=your-cron-secret

# Google Analytics (可选)
# NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# ============================================
# Rate Limiting 配置 (Upstash Redis) - 可选
# ============================================
# 用于 API 限流保护，防止滥用
# 未配置时将跳过限流检查
#
# 1. 访问 https://upstash.com
# 2. 创建 Redis 数据库
# 3. 获取 REST URL 和 Token

# UPSTASH_REDIS_REST_URL=https://xxx.upstash.io
# UPSTASH_REDIS_REST_TOKEN=xxx

# ============================================
# 日志服务配置 (Axiom) - 可选
# ============================================
# 用于结构化日志收集和查询
# 未配置时将使用 console 输出
#
# 1. 访问 https://axiom.co
# 2. 创建数据集 (Dataset)
# 3. 获取 API Token

# AXIOM_TOKEN=xaat-xxx
# AXIOM_DATASET=nextdevtpl

# ============================================
# 错误监控配置 (Sentry) - 可选
# ============================================
# 用于错误追踪和性能监控
# 未配置时将使用 console 输出错误
#
# 1. 访问 https://sentry.io
# 2. 创建项目 (选择 Next.js)
# 3. 获取 DSN

# NEXT_PUBLIC_SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
# SENTRY_AUTH_TOKEN=sntrys_xxx
