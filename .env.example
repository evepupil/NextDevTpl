# ============================================
# NextjsTpl 环境变量配置
# ============================================
# 复制此文件为 .env.local 并填写实际值
# cp .env.example .env.local
#
# 快速开始 (开发环境):
# 1. 数据库: 使用本地 PostgreSQL 或 Neon
# 2. 认证:   配置 GitHub/Google OAuth (可选，可用邮箱登录)
# 3. AI:     配置 OpenAI 或 DeepSeek API Key
# 4. 启动:   pnpm dev
#

# ============================================
# 应用配置
# ============================================
# 应用 URL (用于 OAuth 回调和 API 请求)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# 应用名称 (显示在邮件、通知等)
NEXT_PUBLIC_APP_NAME=NextjsTpl

# 默认用户积分 (新用户注册时赠送)
# DEFAULT_USER_CREDITS=100

# ============================================
# 数据库配置 (PostgreSQL)
# ============================================
# 本地 Docker PostgreSQL 示例:
# DATABASE_URL=postgresql://postgres:password@localhost:5432/nextdevtpl

# Neon Serverless PostgreSQL 示例 (注意: 使用非 pooler 端点以支持事务):
# DATABASE_URL=postgresql://user:password@ep-xxx.us-east-1.aws.neon.tech/neondb?sslmode=require

DATABASE_URL=postgresql://postgres:password@localhost:5432/nextdevtpl

# ============================================
# Better Auth 配置
# ============================================
# 认证密钥 (用于签名会话 Cookie)
# 生成方法: openssl rand -base64 32
BETTER_AUTH_SECRET=your-super-secret-key-change-in-production

# 认证 URL (通常与 NEXT_PUBLIC_APP_URL 相同)
BETTER_AUTH_URL=http://localhost:3000

# ============================================
# GitHub OAuth 配置
# ============================================
# 1. 访问 https://github.com/settings/developers
# 2. 点击 "New OAuth App"
# 3. 填写:
#    - Application name: NextDevTpl (或你的应用名)
#    - Homepage URL: http://localhost:3000
#    - Authorization callback URL: http://localhost:3000/api/auth/callback/github
# 4. 获取 Client ID 和 Client Secret

GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# ============================================
# Google OAuth 配置
# ============================================
# 1. 访问 https://console.cloud.google.com/apis/credentials
# 2. 创建项目 (如果还没有)
# 3. 点击 "Create Credentials" -> "OAuth client ID"
# 4. 选择 "Web application"
# 5. 添加:
#    - Authorized JavaScript origins: http://localhost:3000
#    - Authorized redirect URIs: http://localhost:3000/api/auth/callback/google
# 6. 获取 Client ID 和 Client Secret

GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# ============================================
# Creem 支付配置
# ============================================
# 1. 访问 https://dashboard.creem.io 获取 API Key
# 2. 创建 Webhook 并获取 Secret

CREEM_API_KEY=creem_api_key_xxx
CREEM_WEBHOOK_SECRET=creem_webhook_secret_xxx

# Creem 价格 ID (在 Creem Dashboard -> Products 中创建)
# 可选: 如果不配置，对应的计划将不可用
NEXT_PUBLIC_CREEM_PRICE_STARTER_MONTHLY=price_xxx
NEXT_PUBLIC_CREEM_PRICE_STARTER_YEARLY=price_xxx
NEXT_PUBLIC_CREEM_PRICE_PRO_MONTHLY=price_xxx
NEXT_PUBLIC_CREEM_PRICE_PRO_YEARLY=price_xxx
NEXT_PUBLIC_CREEM_PRICE_ULTRA_MONTHLY=price_xxx
NEXT_PUBLIC_CREEM_PRICE_ULTRA_YEARLY=price_xxx

# ============================================
# 邮件服务配置 (Resend)
# ============================================
# 1. 访问 https://resend.com
# 2. 创建 API Key
# 3. 配置发件域名 (用于生产环境)

RESEND_API_KEY=re_your-resend-api-key

# 发件人地址 (格式: "Name <email@domain.com>")
EMAIL_FROM="NextDevTpl <noreply@your-domain.com>"

# ============================================
# 存储配置 (S3 兼容: AWS S3 / Cloudflare R2 / MinIO)
# ============================================
# NextjsTpl 使用对象存储保存用户上传的文件 (PDF, Word, Markdown)
#
# 本地开发可选，不配置则文件上传功能不可用
#
# Cloudflare R2 示例:
# STORAGE_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
# STORAGE_REGION=auto

# AWS S3 示例:
# STORAGE_ENDPOINT=https://s3.us-east-1.amazonaws.com
# STORAGE_REGION=us-east-1

STORAGE_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
STORAGE_REGION=auto
STORAGE_ACCESS_KEY_ID=your-access-key-id
STORAGE_SECRET_ACCESS_KEY=your-secret-access-key

# 头像存储桶名称 (需要预先在存储服务中创建)
NEXT_PUBLIC_AVATARS_BUCKET_NAME=avatars

# ============================================
# AI 配置 (OpenAI / DeepSeek / MiMo - 必需)
# ============================================
# Cloudflare AI Gateway (可选)
# 只有同时配置 CF_AIG_BASE_URL 和 CF_AIG_TOKEN 才会走网关
# baseURL 需要包含 /v1，并指向你在 CF 配置的 Provider Slug
# 通常形如: https://gateway.ai.cloudflare.com/v1/<account>/<gateway>/<provider>/v1
# CF_AIG_TOKEN 会作为 cf-aig-authorization 头使用，仍需配置各提供商 API Key
CF_AIG_BASE_URL=https://gateway.ai.cloudflare.com/v1/cb5d3307349a8fde7637f773906ad340/NextjsTpl/custom-xiaomi/v1
CF_AIG_TOKEN=cf_aig_token_xxx

# NextjsTpl 核心功能依赖 AI 生成闪卡
# 支持 OpenAI、DeepSeek、MiMo 三种提供商
#
# 支持的 AI 提供商: openai | deepseek | mimo
# 默认使用 OpenAI，设置为 deepseek 或 mimo 切换提供商
AI_PROVIDER=openai

# --- OpenAI 配置 ---
# 1. 访问 https://platform.openai.com/api-keys
# 2. 创建 API Key
OPENAI_API_KEY=sk-your-openai-api-key

# 可选: 指定 OpenAI 模型
# - gpt-4o-mini (默认，推荐，成本低)
# - gpt-4o
# - gpt-3.5-turbo
# OPENAI_MODEL=gpt-4o-mini

# --- DeepSeek 配置 ---
# 1. 访问 https://platform.deepseek.com/api_keys
# 2. 创建 API Key
DEEPSEEK_API_KEY=sk-your-deepseek-api-key

# 可选: 指定 DeepSeek 模型
# - deepseek-chat (默认，推荐)
# - deepseek-reasoner
# DEEPSEEK_MODEL=deepseek-chat

# --- 小米 MiMo 配置 ---
# 小米 MiMo 推理模型，使用 OpenAI 兼容 API
# API 地址: https://api.xiaomimimo.com/v1
MIMO_API_KEY=sk-your-mimo-api-key

# 可选: 指定 MiMo 模型
# - mimo-v2-flash (默认，推荐，快速推理)
# MIMO_MODEL=mimo-v2-flash

# ============================================
# Inngest 配置 (异步任务队列 - 必需)
# ============================================
# NextjsTpl 使用 Inngest 处理闪卡生成的后台任务
#
# 开发模式:
# 1. 安装并启动 Dev Server:
#    npx inngest-cli@latest dev
# 2. 开发服务器会自动连接，无需额外配置
#
# 开发模式标志 (可选，用于明确启用开发模式)
# INNGEST_DEV=1
#
# 本地 Dev Server URL (如果 Dev Server 不在默认端口)
# INNGEST_BASE_URL=http://localhost:8288

# 生产环境密钥 (通过 Vercel Integration 自动设置，通常无需手动配置)
# INNGEST_EVENT_KEY=signkey-prod-xxx
# INNGEST_SIGNING_KEY=signkey-prod-xxx

# ============================================
# 可选配置
# ============================================

# 定时任务密钥 (用于保护 cron 端点)
# 生成方法: openssl rand -hex 32
# CRON_SECRET=your-cron-secret

# Google Analytics (可选)
# NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# ============================================
# Rate Limiting 配置 (Upstash Redis) - 可选
# ============================================
# 用于 API 限流保护，防止滥用
# 未配置时将跳过限流检查
#
# 1. 访问 https://upstash.com
# 2. 创建 Redis 数据库
# 3. 获取 REST URL 和 Token

# UPSTASH_REDIS_REST_URL=https://xxx.upstash.io
# UPSTASH_REDIS_REST_TOKEN=xxx

# ============================================
# 日志服务配置 (Axiom) - 可选
# ============================================
# 用于结构化日志收集和查询
# 未配置时将使用 console 输出
#
# 1. 访问 https://axiom.co
# 2. 创建数据集 (Dataset)
# 3. 获取 API Token

# AXIOM_TOKEN=xaat-xxx
# AXIOM_DATASET=nextdevtpl

# ============================================
# 错误监控配置 (Sentry) - 可选
# ============================================
# 用于错误追踪和性能监控
# 未配置时将使用 console 输出错误
#
# 1. 访问 https://sentry.io
# 2. 创建项目 (选择 Next.js)
# 3. 获取 DSN

# NEXT_PUBLIC_SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
# SENTRY_AUTH_TOKEN=sntrys_xxx
