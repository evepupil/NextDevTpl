# æ¥æº: https://nextdevkit.com/zh/docs/credits

---

[![Logo](https://nextdevkit.com/logo-light.svg)æ–‡æ¡£](https://nextdevkit.com/docs)
[![Logo](https://nextdevkit.com/logo-light.svg)æ–‡æ¡£](https://nextdevkit.com/docs)
`âŒ˜``K`
[](https://nextdevkit.com/)[](https://nextdevkit.com/tutorials)[](https://nextdevkit.com/zh/docs)[](https://nextdevkit.com/zh/docs/tech-stack)[](https://nextdevkit.com/zh/docs/pre)[](https://nextdevkit.com/zh/docs/ai-agents)[](https://nextdevkit.com/zh/docs/project-architecture)
å¯åŠ¨é¡¹ç›®
[](https://nextdevkit.com/zh/docs/project-landing)[](https://nextdevkit.com/zh/docs/build-ui-components)[](https://nextdevkit.com/zh/docs/email)[](https://nextdevkit.com/zh/docs/storage)[](https://nextdevkit.com/zh/docs/blog)[](https://nextdevkit.com/zh/docs/documentation)[](https://nextdevkit.com/zh/docs/i18n)
[](https://nextdevkit.com/zh/docs/credits)[](https://nextdevkit.com/zh/docs/credits/cron-jobs)[](https://nextdevkit.com/zh/docs/credits/api-reference)
[](https://nextdevkit.com/zh/docs/ai-integration)[](https://nextdevkit.com/zh/docs/analytics)[](https://nextdevkit.com/zh/docs/environment-variables)
ç®€ä½“ä¸­æ–‡
ç§¯åˆ†ç³»ç»Ÿæ¦‚è¿°ğŸ¯ ä»€ä¹ˆæ˜¯ç§¯åˆ†ç³»ç»Ÿï¼Ÿ
ç§¯åˆ†ç³»ç»Ÿ
# ç§¯åˆ†ç³»ç»Ÿæ¦‚è¿°
äº†è§£ NEXTDEVKIT ä¸­ç”¨äºç®¡ç†ç”¨æˆ·ç§¯åˆ†ã€æ¶ˆè´¹å’Œå˜ç°çš„å®Œæ•´ç§¯åˆ†ç³»ç»Ÿ
## [ğŸ¯ ä»€ä¹ˆæ˜¯ç§¯åˆ†ç³»ç»Ÿï¼Ÿ](https://nextdevkit.com/zh/docs/credits#-%E4%BB%80%E4%B9%88%E6%98%AF%E7%A7%AF%E5%88%86%E7%B3%BB%E7%BB%9F)
NEXTDEVKIT ä¸­çš„ç§¯åˆ†ç³»ç»Ÿæ˜¯ä¸€ä¸ªçµæ´»ã€ç”Ÿäº§å°±ç»ªçš„å˜ç°æ¡†æ¶ï¼Œä¸“ä¸º AI åº”ç”¨ã€API æœåŠ¡å’Œä»»ä½•åŸºäºä½¿ç”¨é‡è®¡è´¹çš„æ¨¡å¼è€Œè®¾è®¡ã€‚å®ƒæä¾›äº†å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼š
  * ğŸ’° **ä¸€æ¬¡æ€§ç§¯åˆ†è´­ä¹°** - ç”¨æˆ·è´­ä¹°ç§¯åˆ†åŒ…
  * ğŸ **è®¢é˜…ç§¯åˆ†** - ä¸ºè®¢é˜…ç”¨æˆ·æ¯æœˆå‘æ”¾ç§¯åˆ†
  * ğŸ‰ **æ³¨å†Œå¥–åŠ±** - ä¸ºæ–°ç”¨æˆ·æä¾›æ¬¢è¿ç§¯åˆ†
  * ğŸ“Š **ä½¿ç”¨è¿½è¸ª** - ç²¾ç¡®çš„ç§¯åˆ†æ¶ˆè€—ç›‘æ§
  * â° **è¿‡æœŸç®¡ç†** - ä½¿ç”¨ FIFO è‡ªåŠ¨å¤„ç†ç§¯åˆ†è¿‡æœŸ
  * ğŸ”„ **è‡ªåŠ¨å‘æ”¾** - è®¡åˆ’ä»»åŠ¡æ¯æœˆåˆ†å‘ç§¯åˆ†


## [ğŸ¨ ä¸ºä»€ä¹ˆä½¿ç”¨ç§¯åˆ†ç³»ç»Ÿï¼Ÿ](https://nextdevkit.com/zh/docs/credits#-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E7%A7%AF%E5%88%86%E7%B3%BB%E7%BB%9F)
### [é€‚åˆ AI å’Œ API æœåŠ¡](https://nextdevkit.com/zh/docs/credits#%E9%80%82%E5%90%88-ai-%E5%92%8C-api-%E6%9C%8D%E5%8A%A1)
å¦‚æœæ‚¨æ­£åœ¨æ„å»º AI åº”ç”¨ã€API å¹³å°æˆ–ä»»ä½•éœ€è¦åŸºäºä½¿ç”¨é‡è®¡è´¹çš„æœåŠ¡ï¼Œç§¯åˆ†ç³»ç»Ÿæä¾›ï¼š
  1. **çµæ´»çš„å˜ç°æ–¹å¼** ï¼šç»“åˆè®¢é˜…å’ŒæŒ‰éœ€ä»˜è´¹ç§¯åˆ†
  2. **ç”¨æˆ·è‡ªç”±åº¦** ï¼šè®©å…è´¹ç”¨æˆ·è´­ä¹°ç§¯åˆ†åŒ…ï¼Œæ— éœ€å¼ºåˆ¶è®¢é˜…
  3. **å¯é¢„æµ‹çš„æ”¶å…¥** ï¼šæ··åˆç»å¸¸æ€§å’Œä¸€æ¬¡æ€§æ”¶å…¥æµ
  4. **ç”¨æˆ·å‚ä¸å·¥å…·** ï¼šæ³¨å†Œå¥–åŠ±é™ä½æ–°ç”¨æˆ·çš„ä½¿ç”¨é—¨æ§›


### [ä¸»è¦ä¼˜åŠ¿](https://nextdevkit.com/zh/docs/credits#%E4%B8%BB%E8%A6%81%E4%BC%98%E5%8A%BF)
  * âœ… **FIFO è¿‡æœŸæœºåˆ¶** ï¼šå…ˆè¿›å…ˆå‡ºçš„å…¬å¹³ç§¯åˆ†æ¶ˆè´¹
  * âœ… **å¤å¼è®°è´¦** ï¼šå‡†ç¡®çš„è´¢åŠ¡è¿½è¸ªå’Œå®¡è®¡
  * âœ… **è‡ªåŠ¨åŒ–ç®¡ç†** ï¼šå®šæ—¶ä»»åŠ¡å¤„ç†å‘æ”¾å’Œè¿‡æœŸ
  * âœ… **æ”¯ä»˜é›†æˆ** ï¼šæ— ç¼é›†æˆ Stripe/Creem
  * âœ… **ç±»å‹å®‰å…¨** ï¼šå®Œæ•´çš„ TypeScript æ”¯æŒå’Œ Drizzle ORM
  * âœ… **ç”Ÿäº§å°±ç»ª** ï¼šç»è¿‡å®æˆ˜æ£€éªŒï¼Œå…·æœ‰å®Œå–„çš„é”™è¯¯å¤„ç†


## [ğŸ—ï¸ ç³»ç»Ÿæ¶æ„](https://nextdevkit.com/zh/docs/credits#%EF%B8%8F-%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84)
### [ç§¯åˆ†æµç¨‹](https://nextdevkit.com/zh/docs/credits#%E7%A7%AF%E5%88%86%E6%B5%81%E7%A8%8B)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç§¯åˆ†æ¥æº                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ æ³¨å†Œå¥–åŠ±       â€¢ ç§¯åˆ†åŒ…         â€¢ è®¢é˜…è®¡åˆ’                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ç§¯åˆ†æ‰¹æ¬¡             â”‚
    â”‚   (FIFO é˜Ÿåˆ—)          â”‚
    â”‚                        â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ æ‰¹æ¬¡ 1: 100 ç§¯åˆ†  â”‚ â† æœ€æ—©(æœ€å…ˆè¿‡æœŸ)
    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
    â”‚  â”‚ æ‰¹æ¬¡ 2: 200 ç§¯åˆ†  â”‚
    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
    â”‚  â”‚ æ‰¹æ¬¡ 3: 50 ç§¯åˆ†   â”‚ â† æœ€æ–°
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ç§¯åˆ†æ¶ˆè´¹             â”‚
    â”‚   (æœåŠ¡ä½¿ç”¨)           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### [æ•°æ®åº“æ¶æ„](https://nextdevkit.com/zh/docs/credits#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%B6%E6%9E%84)
ç³»ç»Ÿä½¿ç”¨ä¸‰ä¸ªä¸»è¦è¡¨ï¼š
**`credits_balance`**- ç”¨æˆ·ç§¯åˆ†ä½™é¢
```
- id: ç”¨æˆ·ä½™é¢ ID
- userId: ç”¨æˆ·å¼•ç”¨
- balance: å¯ç”¨ç§¯åˆ†
- totalEarned: ç´¯è®¡è·å¾—ç§¯åˆ†
- totalSpent: ç´¯è®¡æ¶ˆè´¹ç§¯åˆ†
- status: è´¦æˆ·çŠ¶æ€ (ACTIVE/FROZEN)
```

**`credits_batch`**- FIFO ç§¯åˆ†æ‰¹æ¬¡
```
- id: æ‰¹æ¬¡ ID
- userId: ç”¨æˆ·å¼•ç”¨
- amount: åŸå§‹ç§¯åˆ†æ•°é‡
- remaining: å‰©ä½™ç§¯åˆ†
- issuedAt: åˆ›å»ºæ—¶é—´æˆ³
- expiresAt: è¿‡æœŸæ—¥æœŸ (å¯ä¸ºç©º)
- status: ACTIVE/CONSUMED/EXPIRED
- sourceType: PURCHASE/SUBSCRIPTION/BONUS
- sourcePlan: è®¡åˆ’æ ‡è¯†ç¬¦
- grantPeriod: YYYY-MM æ ¼å¼çš„æœˆåº¦å‘æ”¾å‘¨æœŸ
```

**`credits_transaction`**- äº¤æ˜“å†å²
```
- id: äº¤æ˜“ ID
- userId: ç”¨æˆ·å¼•ç”¨
- type: purchase/consumption/monthly_grant/registration_bonus/expiration
- amount: ç§¯åˆ†æ•°é‡ (å‘æ”¾ä¸ºæ­£ï¼Œæ¶ˆè´¹ä¸ºè´Ÿ)
- debitAccount: å¤å¼è®°è´¦å€Ÿæ–¹è´¦æˆ·
- creditAccount: å¤å¼è®°è´¦è´·æ–¹è´¦æˆ·
- referenceId: å”¯ä¸€äº¤æ˜“å¼•ç”¨
- status: COMPLETED/FAILED
```

### [ä¸ºä»€ä¹ˆä½¿ç”¨å¤å¼è®°è´¦ï¼Ÿ](https://nextdevkit.com/zh/docs/credits#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%A4%8D%E5%BC%8F%E8%AE%B0%E8%B4%A6)
ç§¯åˆ†ç³»ç»Ÿé‡‡ç”¨**å¤å¼è®°è´¦** åŸåˆ™ï¼Œä»¥å®ç°æœ€é«˜çš„å‡†ç¡®æ€§å’Œå¯å®¡è®¡æ€§ã€‚è¿™æ˜¯ä¸€ä¸ªå…³é”®çš„è®¾è®¡å†³ç­–ï¼Œæä¾›äº†å‡ ä¸ªé‡è¦ä¼˜åŠ¿ï¼š
#### [ä»€ä¹ˆæ˜¯å¤å¼è®°è´¦ï¼Ÿ](https://nextdevkit.com/zh/docs/credits#%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%8D%E5%BC%8F%E8%AE%B0%E8%B4%A6)
æ¯ç¬”ç§¯åˆ†äº¤æ˜“è®°å½•äº¤æ˜“çš„**ä¸¤ä¸ªæ–¹é¢** ï¼š
  * **å€Ÿæ–¹è´¦æˆ·ï¼ˆDebit Accountï¼‰** - ç§¯åˆ†æ¥è‡ªå“ªé‡Œ
  * **è´·æ–¹è´¦æˆ·ï¼ˆCredit Accountï¼‰** - ç§¯åˆ†å»å¾€å“ªé‡Œ


**äº¤æ˜“ç¤ºä¾‹ï¼š**
```
{
  type: "purchase",
  amount: 100,
  debitAccount: "PAYMENT:stripe_payment_123",  // æ¥æº
  creditAccount: "WALLET:user_123",            // ç›®çš„åœ°
}
```

#### [ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ](https://nextdevkit.com/zh/docs/credits#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%99%E6%A0%B7%E8%AE%BE%E8%AE%A1)
**1. è´¢åŠ¡å‡†ç¡®æ€§å’Œå¯å®¡è®¡æ€§**
ä¼ ç»Ÿçš„å•å¼è®°è´¦ç³»ç»Ÿå¯èƒ½ä¼šä¸¢å¤±ç§¯åˆ†è½¨è¿¹ï¼š
```
âŒ å•å¼è®°è´¦ï¼š"ç”¨æˆ·è·å¾— 100 ç§¯åˆ†"
   é—®é¢˜ï¼šå®ƒä»¬ä»å“ªé‡Œæ¥ï¼Ÿæ— æ³•è¿½è¸ªæ¥æºã€‚
âœ… å¤å¼è®°è´¦ï¼š"100 ç§¯åˆ†ä» PAYMENT:xyz è½¬ç§»åˆ° WALLET:user_123"
   æ¸…æ™°ï¼šèµ„é‡‘è½¨è¿¹å®Œæ•´ä¸”å¯è¿½æº¯ã€‚
```

**2. é˜²æ¬ºè¯ˆå’Œå¼‚å¸¸æ£€æµ‹**
ç³»ç»Ÿå¯ä»¥æ£€æµ‹å¼‚å¸¸ï¼š
```
// å¦‚æœæ€»å€Ÿæ–¹ â‰  æ€»è´·æ–¹ï¼Œè¯´æ˜æœ‰é—®é¢˜
const totalDebits = sumAllDebitTransactions();
const totalCredits = sumAllCreditTransactions();
if (totalDebits !== totalCredits) {
  alert("âš ï¸ æ£€æµ‹åˆ°è´¦ç›®ä¸ä¸€è‡´ï¼");
}
```

**3. å…¨é¢çš„è´¢åŠ¡æŠ¥å‘Š**
æ‚¨å¯ä»¥ç”Ÿæˆå¦‚ä¸‹æŠ¥å‘Šï¼š
  * æœ¬æœˆè´­ä¹°çš„ç§¯åˆ†ä¸æ¶ˆè´¹çš„ç§¯åˆ†å„æ˜¯å¤šå°‘ï¼Ÿ
  * å“ªäº›æœåŠ¡æ¶ˆè€—äº†æœ€å¤šçš„ç§¯åˆ†ï¼Ÿ
  * æœ‰å¤šå°‘æ”¶å…¥ä¸æœªä½¿ç”¨çš„ç§¯åˆ†ç›¸å…³ï¼Ÿ


```
// ç¤ºä¾‹ï¼šè¿½è¸ªç§¯åˆ†è´­ä¹°æ”¶å…¥
SELECT SUM(amount) FROM credits_transaction 
WHERE debitAccount LIKE 'PAYMENT:%'
AND createdAt >= '2024-01-01'
```

**4. åˆè§„è¦æ±‚**
å¯¹äºå¤„ç†èµ„é‡‘æˆ–å°†ç§¯åˆ†ä½œä¸ºè´§å¸çš„ä¼ä¸šï¼š
  * **SOC 2 åˆè§„** ï¼šæ‰€æœ‰äº¤æ˜“çš„å®¡è®¡è½¨è¿¹
  * **è´¢åŠ¡å®¡è®¡** ï¼šæ¸…æ™°çš„èµ„é‡‘æµæ–‡æ¡£
  * **ç¨åŠ¡æŠ¥å‘Š** ï¼šå‡†ç¡®çš„æ”¶å…¥ç¡®è®¤


#### [è´¦æˆ·ç»“æ„](https://nextdevkit.com/zh/docs/credits#%E8%B4%A6%E6%88%B7%E7%BB%93%E6%9E%84)
ç³»ç»Ÿä½¿ç”¨ä»¥ä¸‹è´¦æˆ·ç±»å‹ï¼š
**ç³»ç»Ÿè´¦æˆ·** ï¼ˆç§¯åˆ†æ¥æºï¼‰ï¼š
  * `SYSTEM:subscription-grant` - æœˆåº¦è®¢é˜…ç§¯åˆ†
  * `SYSTEM:registration-bonus` - æ¬¢è¿å¥–åŠ±
  * `PAYMENT:purchase_id` - è´­ä¹°çš„ç§¯åˆ†
  * `SYSTEM:expiration` - è¿‡æœŸç§¯åˆ†æ¸…ç†


**ç”¨æˆ·è´¦æˆ·** ï¼ˆç§¯åˆ†ç›®çš„åœ°ï¼‰ï¼š
  * `WALLET:user_id` - ç”¨æˆ·ç§¯åˆ†ä½™é¢
  * `SERVICE:service_name` - æœåŠ¡æ¶ˆè´¹


**äº¤æ˜“æµç¨‹ç¤ºä¾‹ï¼š**
```
è´­ä¹°ï¼š
  PAYMENT:stripe_xyz_123 â†’ WALLET:user_123 (100 ç§¯åˆ†)
æ¶ˆè´¹ï¼š
  WALLET:user_123 â†’ SERVICE:google:chat (2 ç§¯åˆ†)
è¿‡æœŸï¼š
  WALLET:user_123 â†’ SYSTEM:expiration (50 ç§¯åˆ†)
```

#### [ç›¸æ¯”ç®€å•ä½™é¢è¿½è¸ªçš„ä¼˜åŠ¿](https://nextdevkit.com/zh/docs/credits#%E7%9B%B8%E6%AF%94%E7%AE%80%E5%8D%95%E4%BD%99%E9%A2%9D%E8%BF%BD%E8%B8%AA%E7%9A%84%E4%BC%98%E5%8A%BF)
**ç®€å•ä½™é¢ï¼ˆâŒï¼‰ï¼š**
```
UPDATE user_balance SET balance = balance + 100
-- é—®é¢˜ï¼š
-- - æ²¡æœ‰ç§¯åˆ†æ¥æºçš„å†å²è®°å½•
-- - æ— æ³•è¿½è¸ªå·®å¼‚
-- - æ²¡æœ‰å®¡è®¡è½¨è¿¹
-- - å®¹æ˜“å‡ºé”™
```

**å¤å¼è®°è´¦ï¼ˆâœ…ï¼‰ï¼š**
```
-- äº¤æ˜“ 1ï¼šè®°å½•è½¬è´¦
INSERT INTO credits_transaction (
  debitAccount: 'PAYMENT:xyz',
  creditAccount: 'WALLET:user_123',
  amount: 100
)
-- äº¤æ˜“ 2ï¼šæ›´æ–°æ‰¹æ¬¡å’Œä½™é¢
-- ä¸¤è€…éƒ½è¢«è·Ÿè¸ªå’ŒéªŒè¯
```

#### [å®é™…åœºæ™¯çš„ä¼˜åŠ¿](https://nextdevkit.com/zh/docs/credits#%E5%AE%9E%E9%99%85%E5%9C%BA%E6%99%AF%E7%9A%84%E4%BC%98%E5%8A%BF)
**åœºæ™¯ 1ï¼šç”¨æˆ·çº çº·**
```
ç”¨æˆ·ï¼š"æˆ‘è´­ä¹°äº† 500 ç§¯åˆ†ï¼Œä½†åªæœ‰ 400ï¼"
ä½¿ç”¨å¤å¼è®°è´¦ï¼Œæ‚¨å¯ä»¥å±•ç¤ºï¼š
- è´­ä¹°ï¼šPAYMENT:xyz â†’ WALLET:user (500 ç§¯åˆ†) âœ“
- æ¶ˆè´¹ 1ï¼šWALLET:user â†’ SERVICE:chat (50 ç§¯åˆ†) âœ“
- æ¶ˆè´¹ 2ï¼šWALLET:user â†’ SERVICE:image (50 ç§¯åˆ†) âœ“
- æ€»è®¡ï¼š500 - 100 = 400 ç§¯åˆ† âœ“
```

**åœºæ™¯ 2ï¼šæ”¶å…¥å¯¹è´¦**
```
CFOï¼š"æœ‰å¤šå°‘èµ„é‡‘è¢«æœªä½¿ç”¨çš„ç§¯åˆ†å ç”¨ï¼Ÿ"
æŸ¥è¯¢ï¼š
SELECT SUM(amount) FROM credits_transaction
WHERE debitAccount LIKE 'PAYMENT:%'
AND userId IN (SELECT userId FROM credits_balance WHERE balance > 0)
ç­”æ¡ˆï¼š$12,450 çš„æœªå…‘æ¢ç§¯åˆ†ä»·å€¼
```

**åœºæ™¯ 3ï¼šç³»ç»Ÿå®Œæ•´æ€§æ£€æŸ¥**
```
// æ¯æ—¥å®Œæ•´æ€§æ£€æŸ¥
async function verifySystemIntegrity() {
  // æ±‡æ€»æ‰€æœ‰å‘æ”¾çš„ç§¯åˆ†
  const issued = await db
    .select({ total: sum(creditsTransaction.amount) })
    .where(like(creditsTransaction.debitAccount, 'PAYMENT:%'));
  // æ±‡æ€»æ‰€æœ‰ç”¨æˆ·ä½™é¢
  const balances = await db
    .select({ total: sum(creditsBalance.balance) });
  // æ±‡æ€»æ‰€æœ‰æ¶ˆè´¹çš„ç§¯åˆ†
  const consumed = await db
    .select({ total: sum(creditsTransaction.amount) })
    .where(like(creditsTransaction.creditAccount, 'SERVICE:%'));
  // issued åº”è¯¥ç­‰äº balances + consumed
  if (issued !== balances + consumed) {
    throw new Error("æ£€æµ‹åˆ°è´¦ç›®ä¸åŒ¹é…ï¼");
  }
}
```

#### [è®¾è®¡æƒè¡¡](https://nextdevkit.com/zh/docs/credits#%E8%AE%BE%E8%AE%A1%E6%9D%83%E8%A1%A1)
**ä¼˜ç‚¹ï¼š**
  * âœ… å®Œæ•´çš„å®¡è®¡è½¨è¿¹
  * âœ… æ¬ºè¯ˆæ£€æµ‹
  * âœ… è´¢åŠ¡å‡†ç¡®æ€§
  * âœ… åˆè§„æ€§
  * âœ… æŠ¥å‘Šä¾¿æ·


**ç¼ºç‚¹ï¼š**
  * âš ï¸ å®ç°ç¨å¾®å¤æ‚
  * âš ï¸ æ›´å¤šæ•°æ®åº“å­˜å‚¨ï¼ˆå€¼å¾—ï¼ï¼‰
  * âš ï¸ éœ€è¦ç†è§£ä¼šè®¡æ¦‚å¿µ


**ä¸ºä»€ä¹ˆå€¼å¾—ï¼š**
å³ä½¿æ˜¯å°çš„ç§¯åˆ†å·®å¼‚ä¹Ÿå¯èƒ½ï¼š
  * å¯¼è‡´ç”¨æˆ·æŠ•è¯‰å’Œé€€æ¬¾
  * ä½¿è¿½è¸ªé”™è¯¯å˜å¾—ä¸å¯èƒ½
  * é€ æˆç¨åŠ¡å’Œåˆè§„é—®é¢˜
  * æŸå®³ç”¨æˆ·ä¿¡ä»»


ç›¸æ¯”äºå¸¦æ¥çš„å¥½å¤„ï¼Œå¢åŠ çš„å¤æ‚æ€§æ˜¯æœ€å°çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤„ç†çœŸå®èµ„é‡‘çš„ç”Ÿäº§ç³»ç»Ÿã€‚
## [ğŸ’¡ å·¥ä½œåŸç†](https://nextdevkit.com/zh/docs/credits#-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86)
### [1. ç§¯åˆ†å‘æ”¾(æ³¨å†Œå¥–åŠ±ç¤ºä¾‹)](https://nextdevkit.com/zh/docs/credits#1-%E7%A7%AF%E5%88%86%E5%8F%91%E6%94%BE%E6%B3%A8%E5%86%8C%E5%A5%96%E5%8A%B1%E7%A4%BA%E4%BE%8B)
å½“ç”¨æˆ·æ³¨å†Œæ—¶ï¼š
```
import { grantRegistrationBonus } from "@/credits/actions";
// ç”¨æˆ·æ³¨å†Œåè‡ªåŠ¨è°ƒç”¨
await grantRegistrationBonus(userId);
```

**æ‰§è¡Œæµç¨‹ï¼š**
  1. åˆ›å»ºæ–°çš„ç§¯åˆ†æ‰¹æ¬¡ï¼ŒåŒ…å« 20 ç§¯åˆ†ï¼ˆå¯é…ç½®ï¼‰
  2. è®¾ç½®è¿‡æœŸæ—¥æœŸï¼ˆé»˜è®¤ 30 å¤©ï¼‰
  3. è®°å½•ç±»å‹ä¸º `registration_bonus` çš„äº¤æ˜“
  4. æ›´æ–°ç”¨æˆ·æ€»ä½™é¢
  5. åˆ›å»ºå¤å¼è®°è´¦è®°å½•


### [2. ç§¯åˆ†æ¶ˆè´¹ (FIFO)](https://nextdevkit.com/zh/docs/credits#2-%E7%A7%AF%E5%88%86%E6%B6%88%E8%B4%B9-fifo)
å½“æœåŠ¡ä½¿ç”¨ç§¯åˆ†æ—¶ï¼š
```
import { consumeCreditsForService } from "@/credits/actions";
// ä¸º AI æœåŠ¡æ¶ˆè´¹ç§¯åˆ†
const result = await consumeCreditsForService({
  userId: "user_123",
  service: "google:chat",  // æ¶ˆè€— 2 ç§¯åˆ†ï¼ˆå·²é…ç½®ï¼‰
});
// æˆ–æŒ‡å®šè‡ªå®šä¹‰æ•°é‡
const result = await consumeCreditsForService({
  userId: "user_123",
  service: "custom_service",
  amount: 5,  // è‡ªå®šä¹‰æ•°é‡
  description: "è‡ªå®šä¹‰ AI æ¨¡å‹ä½¿ç”¨",
});
```

**FIFO æµç¨‹ï¼š**
  1. è·å–æ‰€æœ‰æŒ‰è¿‡æœŸæ—¥æœŸæ’åºçš„æ´»åŠ¨æ‰¹æ¬¡
  2. ä»æœ€æ—©çš„æ‰¹æ¬¡å¼€å§‹æ¶ˆè´¹
  3. å¦‚æœæ‰¹æ¬¡è€—å°½ï¼Œç§»è‡³ä¸‹ä¸€æ‰¹æ¬¡
  4. è®°å½•è¯¦ç»†çš„æ¶ˆè´¹æ—¥å¿—
  5. å¦‚æœæ‰¹æ¬¡å®Œå…¨æ¶ˆè€—ï¼Œæ›´æ–°æ‰¹æ¬¡çŠ¶æ€
  6. åˆ›å»ºäº¤æ˜“è®°å½•


**ç¤ºä¾‹ï¼š**
```
ç”¨æˆ·æ‹¥æœ‰ï¼š
- æ‰¹æ¬¡ A: 10 ç§¯åˆ† (5 å¤©åè¿‡æœŸ)
- æ‰¹æ¬¡ B: 50 ç§¯åˆ† (25 å¤©åè¿‡æœŸ)
æœåŠ¡éœ€è¦ 15 ç§¯åˆ†ï¼š
â†’ ä»æ‰¹æ¬¡ A æ¶ˆè´¹ 10 ç§¯åˆ† (ç°å·²è€—å°½)
â†’ ä»æ‰¹æ¬¡ B æ¶ˆè´¹ 5 ç§¯åˆ† (å‰©ä½™ 45)
```

### [3. æœˆåº¦è®¢é˜…ç§¯åˆ†](https://nextdevkit.com/zh/docs/credits#3-%E6%9C%88%E5%BA%A6%E8%AE%A2%E9%98%85%E7%A7%AF%E5%88%86)
å¯¹äºè®¢é˜…è®¡åˆ’ç”¨æˆ·ï¼š
```
// ç”±å®šæ—¶ä»»åŠ¡è‡ªåŠ¨è°ƒç”¨
import { processDailyGrant } from "@/credits/actions";
// æ¯å¤© 01:00 UTC è¿è¡Œ(å¯é…ç½®)
const results = await processDailyGrant();
```

**æ‰§è¡Œæµç¨‹ï¼š**
  1. æŸ¥æ‰¾æ‰€æœ‰æ´»åŠ¨è®¢é˜…
  2. æ£€æŸ¥è®¢é˜…åˆ›å»ºå‘¨å¹´æ—¥
  3. éªŒè¯æœ¬æœˆå°šæœªå‘æ”¾
  4. å‘æ”¾æœˆåº¦ç§¯åˆ†ï¼ˆä¾‹å¦‚ Pro è®¡åˆ’ 200 ç§¯åˆ†ï¼‰
  5. è®°å½• `grantPeriod`ï¼ˆYYYY-MMï¼‰
  6. é˜²æ­¢é‡å¤å‘æ”¾


### [4. ç§¯åˆ†è¿‡æœŸ](https://nextdevkit.com/zh/docs/credits#4-%E7%A7%AF%E5%88%86%E8%BF%87%E6%9C%9F)
è‡ªåŠ¨è¿‡æœŸå¤„ç†ï¼š
```
// ç”±å®šæ—¶ä»»åŠ¡è‡ªåŠ¨è°ƒç”¨
import { processExpiredCredits } from "@/credits/actions";
// æ¯å¤©è¿è¡Œä»¥å¤„ç†è¿‡æœŸæ‰¹æ¬¡
const result = await processExpiredCredits();
```

**æ‰§è¡Œæµç¨‹ï¼š**
  1. æŸ¥æ‰¾æ‰€æœ‰ `expiresAt < now()` çš„æ‰¹æ¬¡
  2. æ›´æ–°æ‰¹æ¬¡çŠ¶æ€ä¸º `EXPIRED`
  3. åˆ›å»ºè¿‡æœŸäº¤æ˜“
  4. æ›´æ–°ç”¨æˆ·ä½™é¢
  5. ç»´æŠ¤å‡†ç¡®çš„è´¦ç›®


## [âš™ï¸ é…ç½®è¯´æ˜](https://nextdevkit.com/zh/docs/credits#%EF%B8%8F-%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E)
### [ä¸»é…ç½® (`src/config/index.ts`)](https://nextdevkit.com/zh/docs/credits#%E4%B8%BB%E9%85%8D%E7%BD%AE-srcconfigindexts)
```
export const appConfig = {
  credits: {
    // å¯ç”¨/ç¦ç”¨æ•´ä¸ªç§¯åˆ†ç³»ç»Ÿ
    enabled: true,
    // æ³¨å†Œå¥–åŠ±è®¾ç½®
    registration: {
      enabled: true,
      amount: 20,        // æ–°ç”¨æˆ·å…è´¹ç§¯åˆ†
      validityDays: 30,  // 30 å¤©åè¿‡æœŸ
    },
    // ç³»ç»Ÿé™åˆ¶
    limitations: {
      allowFreeUserPurchasePackages: true,  // å…è´¹ç”¨æˆ·å¯ä»¥è´­ä¹°ç§¯åˆ†
      maxUserBalance: 10000,                 // æœ€å¤§ç§¯åˆ†é™åˆ¶
    },
    // è®¢é˜…è®¡åˆ’çš„æœˆåº¦ç§¯åˆ†
    subscription: {
      free: {
        id: "free",
        enabled: true,
        monthlyGrant: 10,    // å…è´¹ç”¨æˆ·æ¯æœˆ 10 ç§¯åˆ†
        validityDays: 30,
      },
      pro: {
        id: "pro",
        enabled: true,
        monthlyGrant: 200,   // Pro ç”¨æˆ·æ¯æœˆ 200 ç§¯åˆ†
        validityDays: 30,
      },
    },
    // ä¸€æ¬¡æ€§ç§¯åˆ†åŒ…
    packages: {
      lite: {
        id: "lite",
        name: "Lite",
        credits: 100,                              // åŸºç¡€ç§¯åˆ†
        priceId: process.env.CREDIT_LITE_PRICE_ID, // Stripe/Creem ä»·æ ¼ ID
        amount: 9.99,                               // ç¾å…ƒä»·æ ¼
        currency: "USD",
        validityDays: 90,                           // 3 ä¸ªæœˆ
        bonus: 10,                                  // å¥–åŠ±ç§¯åˆ†
      },
      standard: {
        id: "standard",
        name: "Standard",
        credits: 500,
        priceId: process.env.CREDIT_STANDARD_PRICE_ID,
        amount: 29.99,
        currency: "USD",
        validityDays: 90,
        bonus: 50,
      },
      pro: {
        id: "pro",
        name: "Pro",
        credits: 1500,
        priceId: process.env.CREDIT_PRO_PRICE_ID,
        amount: 79.99,
        currency: "USD",
        popular: true,  // çªå‡ºæ˜¾ç¤ºæ­¤å¥—é¤
        validityDays: 90,
        bonus: 200,
      },
      max: {
        id: "max",
        name: "Max",
        credits: 5000,
        priceId: process.env.CREDIT_MAX_PRICE_ID,
        amount: 199.99,
        currency: "USD",
        validityDays: 365,  // 1 å¹´æœ‰æ•ˆæœŸ
        bonus: 1000,
      },
    },
    // ä¸åŒæœåŠ¡çš„ç§¯åˆ†æ¶ˆè€—ç‡
    consumption: {
      "google:fast": 1,      // å¿«é€Ÿ AI æ¨¡å‹ï¼š1 ç§¯åˆ†
      "google:chat": 2,      // èŠå¤©æ¨¡å‹ï¼š2 ç§¯åˆ†
      "google:reasoning": 4, // é«˜çº§æ¨ç†ï¼š4 ç§¯åˆ†
      "google:image": 5,     // å›¾åƒç”Ÿæˆï¼š5 ç§¯åˆ†
    },
  },
};
```

### [è®¾è®¡ç†å¿µ](https://nextdevkit.com/zh/docs/credits#%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5)
#### [ä¸ºä»€ä¹ˆä½¿ç”¨ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ï¼Ÿ](https://nextdevkit.com/zh/docs/credits#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8-fifo%E5%85%88%E8%BF%9B%E5%85%88%E5%87%BA)
FIFO ç¡®ä¿å…¬å¹³æ€§å¹¶é¼“åŠ±åŠæ—¶ä½¿ç”¨ç§¯åˆ†ï¼š
  * **å¯¹ç”¨æˆ·å…¬å¹³** ï¼šæœ€æ—©çš„ç§¯åˆ†å…ˆè¢«ä½¿ç”¨
  * **é¼“åŠ±å‚ä¸** ï¼šç”¨æˆ·æœ‰åŠ¨åŠ›åœ¨è¿‡æœŸå‰ä½¿ç”¨ç§¯åˆ†
  * **å¯é¢„æµ‹æ€§** ï¼šç”¨æˆ·äº†è§£å“ªäº›ç§¯åˆ†ä¼šå…ˆè¿‡æœŸ
  * **æ”¶å…¥ä¼˜åŒ–** ï¼šå‡å°‘æœªä½¿ç”¨ç§¯åˆ†çš„ç´¯ç§¯


#### [ä¸ºä»€ä¹ˆè¦æœ‰è¿‡æœŸæœºåˆ¶ï¼Ÿ](https://nextdevkit.com/zh/docs/credits#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89%E8%BF%87%E6%9C%9F%E6%9C%BA%E5%88%B6)
ç§¯åˆ†è¿‡æœŸæœ‰å¤šä¸ªç›®çš„ï¼š
  * **é˜²æ­¢å›¤ç§¯** ï¼šé¼“åŠ±ç§¯æä½¿ç”¨
  * **æ”¶å…¥ç¡®è®¤** ï¼šæœ‰åŠ©äºè´¢åŠ¡è§„åˆ’
  * **ç”¨æˆ·å‚ä¸** ï¼šä¸ºå¹³å°ä½¿ç”¨åˆ›é€ ç´§è¿«æ„Ÿ
  * **å…¬å¹³å˜ç°** ï¼šå¹³è¡¡ç”¨æˆ·ä»·å€¼å’Œä¸šåŠ¡éœ€æ±‚


#### [é…ç½®çš„å½±å“](https://nextdevkit.com/zh/docs/credits#%E9%85%8D%E7%BD%AE%E7%9A%84%E5%BD%B1%E5%93%8D)
ä¸åŒçš„é…ç½®ä¼šäº§ç”Ÿä¸åŒçš„ç»“æœï¼š
**ä¿å®ˆæ¨¡å¼** ï¼ˆè¾ƒé•¿è¿‡æœŸæ—¶é—´ï¼Œè¾ƒä½å‘æ”¾ï¼‰ï¼š
```
registration: { amount: 10, validityDays: 14 },
subscription: {
  pro: { monthlyGrant: 100, validityDays: 30 }
}
```

  * ç”¨æˆ·è´­ä¹°æ›´å¤šç§¯åˆ†åŒ…
  * ä»˜è´¹è®¡åˆ’è½¬åŒ–ç‡æ›´é«˜
  * ä½¿ç”¨æ¨¡å¼æ›´å¯é¢„æµ‹


**æ…·æ…¨æ¨¡å¼** ï¼ˆè¾ƒé•¿è¿‡æœŸæ—¶é—´ï¼Œè¾ƒé«˜å‘æ”¾ï¼‰ï¼š
```
registration: { amount: 50, validityDays: 90 },
subscription: {
  pro: { monthlyGrant: 500, validityDays: 60 }
}
```

  * æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ
  * æ›´é«˜çš„ç•™å­˜ç‡
  * é¼“åŠ±å¹³å°æ¢ç´¢
  * æ½œåœ¨çš„ç—…æ¯’å¼å¢é•¿


## [ğŸš€ å¿«é€Ÿå¼€å§‹](https://nextdevkit.com/zh/docs/credits#-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B)
### [æ­¥éª¤ 1ï¼šé…ç½®ç¯å¢ƒå˜é‡](https://nextdevkit.com/zh/docs/credits#%E6%AD%A5%E9%AA%A4-1%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F)
åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ ï¼š
```
# ---------ç§¯åˆ†ç³»ç»Ÿ----------
# é¦–å…ˆåœ¨ Stripe/Creem æ§åˆ¶é¢æ¿ä¸­åˆ›å»ºè¿™äº›äº§å“
CREDIT_LITE_PRICE_ID=price_xxx      # Lite å¥—é¤ä»·æ ¼ ID
CREDIT_STANDARD_PRICE_ID=price_xxx  # Standard å¥—é¤ä»·æ ¼ ID
CREDIT_PRO_PRICE_ID=price_xxx       # Pro å¥—é¤ä»·æ ¼ ID
CREDIT_MAX_PRICE_ID=price_xxx       # Max å¥—é¤ä»·æ ¼ ID
# ---------å®šæ—¶ä»»åŠ¡----------
# ç”Ÿæˆéšæœºçš„ 16 å­—ç¬¦å¯†é’¥
CRON_SECRET=your-secret-key-here
```

### [æ­¥éª¤ 2ï¼šåœ¨æ”¯ä»˜æä¾›å•†ä¸­åˆ›å»ºä»·æ ¼](https://nextdevkit.com/zh/docs/credits#%E6%AD%A5%E9%AA%A4-2%E5%9C%A8%E6%94%AF%E4%BB%98%E6%8F%90%E4%BE%9B%E5%95%86%E4%B8%AD%E5%88%9B%E5%BB%BA%E4%BB%B7%E6%A0%BC)
ä¸ºæ¯ä¸ªç§¯åˆ†åŒ…åœ¨ Stripe æˆ– Creem ä¸­åˆ›å»º**ä¸€æ¬¡æ€§æ”¯ä»˜äº§å“** ï¼š
**Stripeï¼š**
  1. è¿›å…¥ Stripe æ§åˆ¶é¢æ¿ â†’ Products
  2. ç‚¹å‡» "Add product"
  3. è®¾ç½®å®šä»·ä¸ºä¸€æ¬¡æ€§æ”¯ä»˜
  4. å¤åˆ¶ä»·æ ¼ IDï¼ˆä»¥ `price_` å¼€å¤´ï¼‰
  5. æ·»åŠ åˆ°ç¯å¢ƒå˜é‡


**Creemï¼š**
  1. è¿›å…¥ Creem æ§åˆ¶é¢æ¿ â†’ Products
  2. åˆ›å»ºä¸€æ¬¡æ€§äº§å“
  3. å¤åˆ¶äº§å“ ID
  4. æ·»åŠ åˆ°ç¯å¢ƒå˜é‡


### [æ­¥éª¤ 3ï¼šè®¾ç½®å®šæ—¶ä»»åŠ¡](https://nextdevkit.com/zh/docs/credits#%E6%AD%A5%E9%AA%A4-3%E8%AE%BE%E7%BD%AE%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1)
ç³»ç»Ÿéœ€è¦ä¸¤ä¸ªå®šæ—¶ä»»åŠ¡ï¼š
#### [å‘æ”¾ç§¯åˆ†å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å¤©ï¼‰](https://nextdevkit.com/zh/docs/credits#%E5%8F%91%E6%94%BE%E7%A7%AF%E5%88%86%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%AF%8F%E5%A4%A9)
URL: `https://yourdomain.com/api/jobs/credits/grant` è®¡åˆ’: æ¯å¤© 01:00 UTC è¯·æ±‚å¤´: `Authorization: Bearer your-cron-secret`
#### [è¿‡æœŸç§¯åˆ†å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å¤©ï¼‰](https://nextdevkit.com/zh/docs/credits#%E8%BF%87%E6%9C%9F%E7%A7%AF%E5%88%86%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%AF%8F%E5%A4%A9)
URL: `https://yourdomain.com/api/jobs/credits/expire` è®¡åˆ’: æ¯å¤© 04:00 UTC è¯·æ±‚å¤´: `Authorization: Bearer your-cron-secret`
æŸ¥çœ‹[å®šæ—¶ä»»åŠ¡è®¾ç½®æŒ‡å—](https://nextdevkit.com/docs/credits/cron-jobs)äº†è§£è¯¦ç»†çš„å¹³å°ç‰¹å®šè¯´æ˜ã€‚
## [ğŸ“– ä¸‹ä¸€æ­¥](https://nextdevkit.com/zh/docs/credits#-%E4%B8%8B%E4%B8%80%E6%AD%A5)
  * ğŸ“˜ [å®šæ—¶ä»»åŠ¡è®¾ç½®](https://nextdevkit.com/docs/credits/cron-jobs) - é…ç½®è‡ªåŠ¨ç§¯åˆ†ç®¡ç†
  * ğŸ”§ [API å‚è€ƒ](https://nextdevkit.com/docs/credits/api-reference) - å­¦ä¹ æ‰€æœ‰ç§¯åˆ†å‡½æ•°
  * ğŸ’¡ [ä½¿ç”¨ç¤ºä¾‹](https://nextdevkit.com/docs/credits/usage-examples) - å®é™…å®ç°ç¤ºä¾‹


## [ğŸ¤” å¸¸è§é—®é¢˜](https://nextdevkit.com/zh/docs/credits#-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98)
### [å¯ä»¥ç¦ç”¨ç‰¹å®šè®¡åˆ’çš„ç§¯åˆ†å—ï¼Ÿ](https://nextdevkit.com/zh/docs/credits#%E5%8F%AF%E4%BB%A5%E7%A6%81%E7%94%A8%E7%89%B9%E5%AE%9A%E8%AE%A1%E5%88%92%E7%9A%84%E7%A7%AF%E5%88%86%E5%90%97)
å¯ä»¥ï¼åœ¨è®¢é˜…é…ç½®ä¸­è®¾ç½® `enabled: false`ï¼š
```
subscription: {
  free: {
    enabled: false,  // å…è´¹ç”¨æˆ·ä¸è·å¾—æœˆåº¦ç§¯åˆ†
  },
}
```

### [å…è´¹ç”¨æˆ·å¯ä»¥è´­ä¹°ç§¯åˆ†åŒ…å—ï¼Ÿ](https://nextdevkit.com/zh/docs/credits#%E5%85%8D%E8%B4%B9%E7%94%A8%E6%88%B7%E5%8F%AF%E4%BB%A5%E8%B4%AD%E4%B9%B0%E7%A7%AF%E5%88%86%E5%8C%85%E5%90%97)
ç”± `allowFreeUserPurchasePackages` æ§åˆ¶ï¼š
```
limitations: {
  allowFreeUserPurchasePackages: true,  // å…è®¸
}
```

### [ç§¯åˆ†è¿‡æœŸæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ](https://nextdevkit.com/zh/docs/credits#%E7%A7%AF%E5%88%86%E8%BF%87%E6%9C%9F%E6%97%B6%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88)
  * æ‰¹æ¬¡çŠ¶æ€æ›´æ”¹ä¸º `EXPIRED`
  * ä»ç”¨æˆ·ä½™é¢ä¸­æ‰£é™¤ç§¯åˆ†
  * åˆ›å»ºå®¡è®¡äº¤æ˜“è®°å½•
  * ä¸é€šçŸ¥ç”¨æˆ·ï¼ˆæ‚¨å¯ä»¥å®ç°é€šçŸ¥åŠŸèƒ½ï¼‰


### [å¦‚ä½•è¿½è¸ªç§¯åˆ†ä½¿ç”¨æƒ…å†µï¼Ÿ](https://nextdevkit.com/zh/docs/credits#%E5%A6%82%E4%BD%95%E8%BF%BD%E8%B8%AA%E7%A7%AF%E5%88%86%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5)
ä½¿ç”¨ç”¨æˆ·äº¤æ˜“é¡µé¢æˆ–ç›´æ¥æŸ¥è¯¢ï¼š
```
import { getUserTransactions } from "@/credits/actions";
const { items } = await getUserTransactions({
  userId: "user_123",
  pageIndex: 0,
  pageSize: 10,
});
```

* * *
## [ğŸ“š ç›¸å…³æ–‡æ¡£](https://nextdevkit.com/zh/docs/credits#-%E7%9B%B8%E5%85%B3%E6%96%87%E6%A1%A3)
  * ğŸ’³ [æ”¯ä»˜é›†æˆ](https://nextdevkit.com/docs/payment) - è®¾ç½® Stripe æˆ– Creem
  * ğŸ—„ï¸ [æ•°æ®åº“æ¶æ„](https://nextdevkit.com/docs/database) - äº†è§£æ•°æ®ç»“æ„
  * âš™ï¸ [é…ç½®è¯´æ˜](https://nextdevkit.com/docs/configuration) - åº”ç”¨é…ç½®æŒ‡å—


[å¦‚ä½•ä½¿ç”¨æ”¯ä»˜ å­¦ä¹ å¦‚ä½•åœ¨ NEXTDEVKIT ä¸­ä½¿ç”¨ Stripe å’Œ Creem çš„æ”¯ä»˜ API](https://nextdevkit.com/zh/docs/payment/how-to-use)[å®šæ—¶ä»»åŠ¡è®¾ç½® ä½¿ç”¨å„ç§å®šæ—¶ä»»åŠ¡å¹³å°é…ç½®è‡ªåŠ¨ç§¯åˆ†å‘æ”¾å’Œè¿‡æœŸå¤„ç†](https://nextdevkit.com/zh/docs/credits/cron-jobs)
[](https://nextdevkit.com/zh/docs/credits#-%E4%BB%80%E4%B9%88%E6%98%AF%E7%A7%AF%E5%88%86%E7%B3%BB%E7%BB%9F)[](https://nextdevkit.com/zh/docs/credits#-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E7%A7%AF%E5%88%86%E7%B3%BB%E7%BB%9F)[](https://nextdevkit.com/zh/docs/credits#%E9%80%82%E5%90%88-ai-%E5%92%8C-api-%E6%9C%8D%E5%8A%A1)[](https://nextdevkit.com/zh/docs/credits#%E4%B8%BB%E8%A6%81%E4%BC%98%E5%8A%BF)[](https://nextdevkit.com/zh/docs/credits#%EF%B8%8F-%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84)[](https://nextdevkit.com/zh/docs/credits#%E7%A7%AF%E5%88%86%E6%B5%81%E7%A8%8B)[](https://nextdevkit.com/zh/docs/credits#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%B6%E6%9E%84)[](https://nextdevkit.com/zh/docs/credits#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%A4%8D%E5%BC%8F%E8%AE%B0%E8%B4%A6)[](https://nextdevkit.com/zh/docs/credits#%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%8D%E5%BC%8F%E8%AE%B0%E8%B4%A6)[](https://nextdevkit.com/zh/docs/credits#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%99%E6%A0%B7%E8%AE%BE%E8%AE%A1)[](https://nextdevkit.com/zh/docs/credits#%E8%B4%A6%E6%88%B7%E7%BB%93%E6%9E%84)[](https://nextdevkit.com/zh/docs/credits#%E7%9B%B8%E6%AF%94%E7%AE%80%E5%8D%95%E4%BD%99%E9%A2%9D%E8%BF%BD%E8%B8%AA%E7%9A%84%E4%BC%98%E5%8A%BF)[](https://nextdevkit.com/zh/docs/credits#%E5%AE%9E%E9%99%85%E5%9C%BA%E6%99%AF%E7%9A%84%E4%BC%98%E5%8A%BF)[](https://nextdevkit.com/zh/docs/credits#%E8%AE%BE%E8%AE%A1%E6%9D%83%E8%A1%A1)[](https://nextdevkit.com/zh/docs/credits#-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86)[](https://nextdevkit.com/zh/docs/credits#1-%E7%A7%AF%E5%88%86%E5%8F%91%E6%94%BE%E6%B3%A8%E5%86%8C%E5%A5%96%E5%8A%B1%E7%A4%BA%E4%BE%8B)[](https://nextdevkit.com/zh/docs/credits#2-%E7%A7%AF%E5%88%86%E6%B6%88%E8%B4%B9-fifo)[](https://nextdevkit.com/zh/docs/credits#3-%E6%9C%88%E5%BA%A6%E8%AE%A2%E9%98%85%E7%A7%AF%E5%88%86)[](https://nextdevkit.com/zh/docs/credits#4-%E7%A7%AF%E5%88%86%E8%BF%87%E6%9C%9F)[](https://nextdevkit.com/zh/docs/credits#%EF%B8%8F-%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E)[`src/config/index.ts`)](https://nextdevkit.com/zh/docs/credits#%E4%B8%BB%E9%85%8D%E7%BD%AE-srcconfigindexts)[](https://nextdevkit.com/zh/docs/credits#%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5)[](https://nextdevkit.com/zh/docs/credits#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8-fifo%E5%85%88%E8%BF%9B%E5%85%88%E5%87%BA)[](https://nextdevkit.com/zh/docs/credits#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89%E8%BF%87%E6%9C%9F%E6%9C%BA%E5%88%B6)[](https://nextdevkit.com/zh/docs/credits#%E9%85%8D%E7%BD%AE%E7%9A%84%E5%BD%B1%E5%93%8D)[](https://nextdevkit.com/zh/docs/credits#-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B)[](https://nextdevkit.com/zh/docs/credits#%E6%AD%A5%E9%AA%A4-1%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F)[](https://nextdevkit.com/zh/docs/credits#%E6%AD%A5%E9%AA%A4-2%E5%9C%A8%E6%94%AF%E4%BB%98%E6%8F%90%E4%BE%9B%E5%95%86%E4%B8%AD%E5%88%9B%E5%BB%BA%E4%BB%B7%E6%A0%BC)[](https://nextdevkit.com/zh/docs/credits#%E6%AD%A5%E9%AA%A4-3%E8%AE%BE%E7%BD%AE%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1)[](https://nextdevkit.com/zh/docs/credits#%E5%8F%91%E6%94%BE%E7%A7%AF%E5%88%86%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%AF%8F%E5%A4%A9)[](https://nextdevkit.com/zh/docs/credits#%E8%BF%87%E6%9C%9F%E7%A7%AF%E5%88%86%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%AF%8F%E5%A4%A9)[](https://nextdevkit.com/zh/docs/credits#-%E4%B8%8B%E4%B8%80%E6%AD%A5)[](https://nextdevkit.com/zh/docs/credits#-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98)[](https://nextdevkit.com/zh/docs/credits#%E5%8F%AF%E4%BB%A5%E7%A6%81%E7%94%A8%E7%89%B9%E5%AE%9A%E8%AE%A1%E5%88%92%E7%9A%84%E7%A7%AF%E5%88%86%E5%90%97)[](https://nextdevkit.com/zh/docs/credits#%E5%85%8D%E8%B4%B9%E7%94%A8%E6%88%B7%E5%8F%AF%E4%BB%A5%E8%B4%AD%E4%B9%B0%E7%A7%AF%E5%88%86%E5%8C%85%E5%90%97)[](https://nextdevkit.com/zh/docs/credits#%E7%A7%AF%E5%88%86%E8%BF%87%E6%9C%9F%E6%97%B6%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88)[](https://nextdevkit.com/zh/docs/credits#%E5%A6%82%E4%BD%95%E8%BF%BD%E8%B8%AA%E7%A7%AF%E5%88%86%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5)[](https://nextdevkit.com/zh/docs/credits#-%E7%9B%B8%E5%85%B3%E6%96%87%E6%A1%A3)
## We use cookies
We use cookies to ensure you get the best experience on our website.
Accept allReject all
Manage Individual preferences
[Terms of Service](https://nextdevkit.com/legal/terms-of-service) [Privacy Policy](https://nextdevkit.com/legal/privacy-policy)
